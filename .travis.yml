language: c
sudo: false
os:
  - linux

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-4.9
      - clang
      - python3
      - bsdtar
      - libstfl-dev

compiler:
  - gcc-4.9

env:
  - prefix="${PWD}/pfx"

script:
  - PATH="${prefix}/bin:${PATH}" PKG_CONFIG_PATH="${prefix}/lib/pkgconfig" make -f .travis.mk PREFIX="${prefix}"
  - PATH="${prefix}/bin:${PATH}" PKG_CONFIG_PATH="${prefix}/lib/pkgconfig" make MESON=meson.py MESONCONF=mesonconf.py NINJA=ninja

notifications:
  email: false
